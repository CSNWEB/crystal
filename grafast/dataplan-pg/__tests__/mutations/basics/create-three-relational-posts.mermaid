%%{init: {'themeVariables': { 'fontSize': '12px'}}}%%
graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:1px,color:#000
    classDef itemplan fill:#fff,stroke-width:2px,color:#000
    classDef unbatchedplan fill:#dff,stroke-width:1px,color:#000
    classDef sideeffectplan fill:#fcc,stroke-width:2px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:2px,text-align:left


    %% plan dependencies
    Object12{{"Object[12∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"}}:::plan
    Access10{{"Access[10∈0]<br />ᐸ3.pgSettingsᐳ"}}:::plan
    Access11{{"Access[11∈0]<br />ᐸ3.withPgClientᐳ"}}:::plan
    Access10 & Access11 --> Object12
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value3 --> Access10
    __Value3 --> Access11
    __Value0["__Value[0∈0]"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    Constant7{{"Constant[7∈0]<br />ᐸ'POST'ᐳ"}}:::plan
    Constant8{{"Constant[8∈0]<br />ᐸ2ᐳ"}}:::plan
    Constant14{{"Constant[14∈0]<br />ᐸ'Post ꖛ1'ᐳ"}}:::plan
    Constant15{{"Constant[15∈0]<br />ᐸ'Desc 1'ᐳ"}}:::plan
    Constant16{{"Constant[16∈0]<br />ᐸnullᐳ"}}:::plan
    Constant28{{"Constant[28∈0]<br />ᐸ'Post ꖛ2'ᐳ"}}:::plan
    Constant29{{"Constant[29∈0]<br />ᐸ'Desc 2'ᐳ"}}:::plan
    Constant42{{"Constant[42∈0]<br />ᐸ'Post ꖛ3'ᐳ"}}:::plan
    Constant43{{"Constant[43∈0]<br />ᐸ'Desc 3'ᐳ"}}:::plan
    PgInsertSingle17[["PgInsertSingle[17∈1]<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression13{{"PgClassExpression[13∈1]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object12 & PgClassExpression13 & Constant14 & Constant15 & Constant16 --> PgInsertSingle17
    PgInsertSingle31[["PgInsertSingle[31∈1]<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression27{{"PgClassExpression[27∈1]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object12 & PgClassExpression27 & Constant28 & Constant29 & Constant16 --> PgInsertSingle31
    PgInsertSingle45[["PgInsertSingle[45∈1]<br />ᐸrelational_posts(id,title,description,note)ᐳ"]]:::sideeffectplan
    PgClassExpression41{{"PgClassExpression[41∈1]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    Object12 & PgClassExpression41 & Constant42 & Constant43 & Constant16 --> PgInsertSingle45
    PgInsertSingle9[["PgInsertSingle[9∈1]<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object12 & Constant7 & Constant8 --> PgInsertSingle9
    PgInsertSingle23[["PgInsertSingle[23∈1]<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object12 & Constant7 & Constant8 --> PgInsertSingle23
    PgInsertSingle37[["PgInsertSingle[37∈1]<br />ᐸrelational_items(type,author_id)ᐳ"]]:::sideeffectplan
    Object12 & Constant7 & Constant8 --> PgInsertSingle37
    PgInsertSingle9 --> PgClassExpression13
    PgInsertSingle23 --> PgClassExpression27
    PgInsertSingle37 --> PgClassExpression41
    PgClassExpression49{{"PgClassExpression[49∈1]<br />ᐸ__relational_posts__ᐳ"}}:::plan
    PgInsertSingle45 --> PgClassExpression49
    PgSelect51[["PgSelect[51∈2]<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant206{{"Constant[206∈2]<br />ᐸ1000000ᐳ"}}:::plan
    Object12 & Constant206 --> PgSelect51
    PgSelect103[["PgSelect[103∈2]<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant207{{"Constant[207∈2]<br />ᐸ1000001ᐳ"}}:::plan
    Object12 & Constant207 --> PgSelect103
    PgSelect155[["PgSelect[155∈2]<br />ᐸrelational_itemsᐳ"]]:::plan
    Constant208{{"Constant[208∈2]<br />ᐸ1000002ᐳ"}}:::plan
    Object12 & Constant208 --> PgSelect155
    First55{{"First[55∈2]"}}:::plan
    PgSelect51 --> First55
    PgSelectSingle56{{"PgSelectSingle[56∈2]<br />ᐸrelational_itemsᐳ"}}:::plan
    First55 --> PgSelectSingle56
    PgClassExpression59{{"PgClassExpression[59∈2]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle56 --> PgClassExpression59
    First107{{"First[107∈2]"}}:::plan
    PgSelect103 --> First107
    PgSelectSingle108{{"PgSelectSingle[108∈2]<br />ᐸrelational_itemsᐳ"}}:::plan
    First107 --> PgSelectSingle108
    PgClassExpression111{{"PgClassExpression[111∈2]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle108 --> PgClassExpression111
    First159{{"First[159∈2]"}}:::plan
    PgSelect155 --> First159
    PgSelectSingle160{{"PgSelectSingle[160∈2]<br />ᐸrelational_itemsᐳ"}}:::plan
    First159 --> PgSelectSingle160
    PgClassExpression163{{"PgClassExpression[163∈2]<br />ᐸ__relation...ems__.”id”ᐳ"}}:::plan
    PgSelectSingle160 --> PgClassExpression163
    PgPolymorphic58{{"PgPolymorphic[58∈3]"}}:::plan
    PgClassExpression57{{"PgClassExpression[57∈3]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle56 & PgClassExpression57 --> PgPolymorphic58
    PgPolymorphic110{{"PgPolymorphic[110∈3]"}}:::plan
    PgClassExpression109{{"PgClassExpression[109∈3]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle108 & PgClassExpression109 --> PgPolymorphic110
    PgPolymorphic162{{"PgPolymorphic[162∈3]"}}:::plan
    PgClassExpression161{{"PgClassExpression[161∈3]<br />ᐸ__relation...s__.”type”ᐳ"}}:::plan
    PgSelectSingle160 & PgClassExpression161 --> PgPolymorphic162
    PgSelectSingle56 --> PgClassExpression57
    PgSelectSingle108 --> PgClassExpression109
    PgSelectSingle160 --> PgClassExpression161
    PgSelect164[["PgSelect[164∈6]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object12 & PgClassExpression163 --> PgSelect164
    PgSelect172[["PgSelect[172∈6]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object12 & PgClassExpression163 --> PgSelect172
    PgSelect183[["PgSelect[183∈6]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object12 & PgClassExpression163 --> PgSelect183
    PgSelect191[["PgSelect[191∈6]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object12 & PgClassExpression163 --> PgSelect191
    PgSelect199[["PgSelect[199∈6]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object12 & PgClassExpression163 --> PgSelect199
    First168{{"First[168∈6]"}}:::plan
    PgSelect164 --> First168
    PgSelectSingle169{{"PgSelectSingle[169∈6]<br />ᐸrelational_topicsᐳ"}}:::plan
    First168 --> PgSelectSingle169
    First176{{"First[176∈6]"}}:::plan
    PgSelect172 --> First176
    PgSelectSingle177{{"PgSelectSingle[177∈6]<br />ᐸrelational_postsᐳ"}}:::plan
    First176 --> PgSelectSingle177
    PgClassExpression179{{"PgClassExpression[179∈6]<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle177 --> PgClassExpression179
    PgClassExpression180{{"PgClassExpression[180∈6]<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle177 --> PgClassExpression180
    PgClassExpression181{{"PgClassExpression[181∈6]<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle177 --> PgClassExpression181
    First187{{"First[187∈6]"}}:::plan
    PgSelect183 --> First187
    PgSelectSingle188{{"PgSelectSingle[188∈6]<br />ᐸrelational_dividersᐳ"}}:::plan
    First187 --> PgSelectSingle188
    First195{{"First[195∈6]"}}:::plan
    PgSelect191 --> First195
    PgSelectSingle196{{"PgSelectSingle[196∈6]<br />ᐸrelational_checklistsᐳ"}}:::plan
    First195 --> PgSelectSingle196
    First203{{"First[203∈6]"}}:::plan
    PgSelect199 --> First203
    PgSelectSingle204{{"PgSelectSingle[204∈6]<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First203 --> PgSelectSingle204
    PgSelect112[["PgSelect[112∈5]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object12 & PgClassExpression111 --> PgSelect112
    PgSelect120[["PgSelect[120∈5]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object12 & PgClassExpression111 --> PgSelect120
    PgSelect131[["PgSelect[131∈5]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object12 & PgClassExpression111 --> PgSelect131
    PgSelect139[["PgSelect[139∈5]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object12 & PgClassExpression111 --> PgSelect139
    PgSelect147[["PgSelect[147∈5]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object12 & PgClassExpression111 --> PgSelect147
    First116{{"First[116∈5]"}}:::plan
    PgSelect112 --> First116
    PgSelectSingle117{{"PgSelectSingle[117∈5]<br />ᐸrelational_topicsᐳ"}}:::plan
    First116 --> PgSelectSingle117
    First124{{"First[124∈5]"}}:::plan
    PgSelect120 --> First124
    PgSelectSingle125{{"PgSelectSingle[125∈5]<br />ᐸrelational_postsᐳ"}}:::plan
    First124 --> PgSelectSingle125
    PgClassExpression127{{"PgClassExpression[127∈5]<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle125 --> PgClassExpression127
    PgClassExpression128{{"PgClassExpression[128∈5]<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle125 --> PgClassExpression128
    PgClassExpression129{{"PgClassExpression[129∈5]<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle125 --> PgClassExpression129
    First135{{"First[135∈5]"}}:::plan
    PgSelect131 --> First135
    PgSelectSingle136{{"PgSelectSingle[136∈5]<br />ᐸrelational_dividersᐳ"}}:::plan
    First135 --> PgSelectSingle136
    First143{{"First[143∈5]"}}:::plan
    PgSelect139 --> First143
    PgSelectSingle144{{"PgSelectSingle[144∈5]<br />ᐸrelational_checklistsᐳ"}}:::plan
    First143 --> PgSelectSingle144
    First151{{"First[151∈5]"}}:::plan
    PgSelect147 --> First151
    PgSelectSingle152{{"PgSelectSingle[152∈5]<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First151 --> PgSelectSingle152
    PgSelect60[["PgSelect[60∈4]<br />ᐸrelational_topicsᐳ<br />ᐳRelationalTopic"]]:::plan
    Object12 & PgClassExpression59 --> PgSelect60
    PgSelect68[["PgSelect[68∈4]<br />ᐸrelational_postsᐳ<br />ᐳRelationalPost"]]:::plan
    Object12 & PgClassExpression59 --> PgSelect68
    PgSelect79[["PgSelect[79∈4]<br />ᐸrelational_dividersᐳ<br />ᐳRelationalDivider"]]:::plan
    Object12 & PgClassExpression59 --> PgSelect79
    PgSelect87[["PgSelect[87∈4]<br />ᐸrelational_checklistsᐳ<br />ᐳRelationalChecklist"]]:::plan
    Object12 & PgClassExpression59 --> PgSelect87
    PgSelect95[["PgSelect[95∈4]<br />ᐸrelational_checklist_itemsᐳ<br />ᐳRelationalChecklistItem"]]:::plan
    Object12 & PgClassExpression59 --> PgSelect95
    First64{{"First[64∈4]"}}:::plan
    PgSelect60 --> First64
    PgSelectSingle65{{"PgSelectSingle[65∈4]<br />ᐸrelational_topicsᐳ"}}:::plan
    First64 --> PgSelectSingle65
    First72{{"First[72∈4]"}}:::plan
    PgSelect68 --> First72
    PgSelectSingle73{{"PgSelectSingle[73∈4]<br />ᐸrelational_postsᐳ"}}:::plan
    First72 --> PgSelectSingle73
    PgClassExpression75{{"PgClassExpression[75∈4]<br />ᐸ__relation...__.”title”ᐳ"}}:::plan
    PgSelectSingle73 --> PgClassExpression75
    PgClassExpression76{{"PgClassExpression[76∈4]<br />ᐸ__relation...scription”ᐳ"}}:::plan
    PgSelectSingle73 --> PgClassExpression76
    PgClassExpression77{{"PgClassExpression[77∈4]<br />ᐸ__relation...s__.”note”ᐳ"}}:::plan
    PgSelectSingle73 --> PgClassExpression77
    First83{{"First[83∈4]"}}:::plan
    PgSelect79 --> First83
    PgSelectSingle84{{"PgSelectSingle[84∈4]<br />ᐸrelational_dividersᐳ"}}:::plan
    First83 --> PgSelectSingle84
    First91{{"First[91∈4]"}}:::plan
    PgSelect87 --> First91
    PgSelectSingle92{{"PgSelectSingle[92∈4]<br />ᐸrelational_checklistsᐳ"}}:::plan
    First91 --> PgSelectSingle92
    First99{{"First[99∈4]"}}:::plan
    PgSelect95 --> First99
    PgSelectSingle100{{"PgSelectSingle[100∈4]<br />ᐸrelational_checklist_itemsᐳ"}}:::plan
    First99 --> PgSelectSingle100

    %% define steps

    subgraph "Buckets for mutations/basics/create-three-relational-posts"
    Bucket0("Bucket 0 (root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value3,__Value5,Constant7,Constant8,Access10,Access11,Object12,Constant14,Constant15,Constant16,Constant28,Constant29,Constant42,Constant43 bucket0
    Bucket1("Bucket 1 (mutationField)<br />Deps: 12, 7, 8, 14, 15, 16, 28, 29, 42, 43, 5<br /><br />1: PgInsertSingle[9]<br />2: PgClassExpression[13]<br />3: PgInsertSingle[17]<br />4: PgInsertSingle[23]<br />5: PgClassExpression[27]<br />6: PgInsertSingle[31]<br />7: PgInsertSingle[37]<br />8: PgClassExpression[41]<br />9: PgInsertSingle[45]<br />10: <br />ᐳ: PgClassExpression[49]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgInsertSingle9,PgClassExpression13,PgInsertSingle17,PgInsertSingle23,PgClassExpression27,PgInsertSingle31,PgInsertSingle37,PgClassExpression41,PgInsertSingle45,PgClassExpression49 bucket1
    Bucket2("Bucket 2 (nullableBoundary)<br />Deps: 12, 49, 5<br /><br />ROOT PgClassExpression{1}ᐸ__relational_posts__ᐳ[49]<br />1: <br />ᐳ: 206, 207, 208<br />2: 51, 103, 155<br />ᐳ: 55, 56, 59, 107, 108, 111, 159, 160, 163"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,PgSelect51,First55,PgSelectSingle56,PgClassExpression59,PgSelect103,First107,PgSelectSingle108,PgClassExpression111,PgSelect155,First159,PgSelectSingle160,PgClassExpression163,Constant206,Constant207,Constant208 bucket2
    Bucket3("Bucket 3 (nullableBoundary)<br />Deps: 56, 108, 160, 5, 12, 59, 111, 163<br /><br />ROOT __ValueᐸrootValueᐳ[5]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgClassExpression57,PgPolymorphic58,PgClassExpression109,PgPolymorphic110,PgClassExpression161,PgPolymorphic162 bucket3
    Bucket4("Bucket 4 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 12, 59, 58<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,PgSelect60,First64,PgSelectSingle65,PgSelect68,First72,PgSelectSingle73,PgClassExpression75,PgClassExpression76,PgClassExpression77,PgSelect79,First83,PgSelectSingle84,PgSelect87,First91,PgSelectSingle92,PgSelect95,First99,PgSelectSingle100 bucket4
    Bucket5("Bucket 5 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 12, 111, 110<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,PgSelect112,First116,PgSelectSingle117,PgSelect120,First124,PgSelectSingle125,PgClassExpression127,PgClassExpression128,PgClassExpression129,PgSelect131,First135,PgSelectSingle136,PgSelect139,First143,PgSelectSingle144,PgSelect147,First151,PgSelectSingle152 bucket5
    Bucket6("Bucket 6 (polymorphic)<br />RelationalTopic,RelationalPost,RelationalDivider,RelationalChecklist,RelationalChecklistItem<br />Deps: 12, 163, 162<br />ᐳRelationalTopic<br />ᐳRelationalPost<br />ᐳRelationalDivider<br />ᐳRelationalChecklist<br />ᐳRelationalChecklistItem"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,PgSelect164,First168,PgSelectSingle169,PgSelect172,First176,PgSelectSingle177,PgClassExpression179,PgClassExpression180,PgClassExpression181,PgSelect183,First187,PgSelectSingle188,PgSelect191,First195,PgSelectSingle196,PgSelect199,First203,PgSelectSingle204 bucket6
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2
    Bucket2 --> Bucket3
    Bucket3 --> Bucket4 & Bucket5 & Bucket6
    end
