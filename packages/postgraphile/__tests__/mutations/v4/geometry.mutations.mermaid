graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    __InputStaticLeaf12["__InputStaticLeaf[12∈0]"]:::plan
    __InputStaticLeaf13["__InputStaticLeaf[13∈0]"]:::plan
    __InputStaticLeaf16["__InputStaticLeaf[16∈0]"]:::plan
    __InputStaticLeaf17["__InputStaticLeaf[17∈0]"]:::plan
    __InputStaticLeaf19["__InputStaticLeaf[19∈0]"]:::plan
    __InputStaticLeaf20["__InputStaticLeaf[20∈0]"]:::plan
    __InputStaticLeaf23["__InputStaticLeaf[23∈0]"]:::plan
    __InputStaticLeaf24["__InputStaticLeaf[24∈0]"]:::plan
    __InputStaticLeaf26["__InputStaticLeaf[26∈0]"]:::plan
    __InputStaticLeaf27["__InputStaticLeaf[27∈0]"]:::plan
    __InputStaticLeaf30["__InputStaticLeaf[30∈0]"]:::plan
    __InputStaticLeaf31["__InputStaticLeaf[31∈0]"]:::plan
    __InputStaticLeaf33["__InputStaticLeaf[33∈0]"]:::plan
    __InputStaticLeaf34["__InputStaticLeaf[34∈0]"]:::plan
    __InputStaticLeaf38["__InputStaticLeaf[38∈0]"]:::plan
    __InputStaticLeaf39["__InputStaticLeaf[39∈0]"]:::plan
    __InputStaticLeaf41["__InputStaticLeaf[41∈0]"]:::plan
    __InputStaticLeaf42["__InputStaticLeaf[42∈0]"]:::plan
    __InputStaticLeaf44["__InputStaticLeaf[44∈0]"]:::plan
    __InputStaticLeaf45["__InputStaticLeaf[45∈0]"]:::plan
    __InputStaticLeaf47["__InputStaticLeaf[47∈0]"]:::plan
    __InputStaticLeaf48["__InputStaticLeaf[48∈0]"]:::plan
    __InputStaticLeaf52["__InputStaticLeaf[52∈0]"]:::plan
    __InputStaticLeaf56["__InputStaticLeaf[56∈0]"]:::plan
    __InputStaticLeaf57["__InputStaticLeaf[57∈0]"]:::plan
    __InputStaticLeaf59["__InputStaticLeaf[59∈0]"]:::plan
    __InputStaticLeaf60["__InputStaticLeaf[60∈0]"]:::plan
    __InputStaticLeaf62["__InputStaticLeaf[62∈0]"]:::plan
    __InputStaticLeaf63["__InputStaticLeaf[63∈0]"]:::plan
    __InputStaticLeaf65["__InputStaticLeaf[65∈0]"]:::plan
    __InputStaticLeaf66["__InputStaticLeaf[66∈0]"]:::plan
    __InputStaticLeaf70["__InputStaticLeaf[70∈0]"]:::plan
    __InputStaticLeaf74["__InputStaticLeaf[74∈0]"]:::plan
    __InputStaticLeaf75["__InputStaticLeaf[75∈0]"]:::plan
    __InputStaticLeaf77["__InputStaticLeaf[77∈0]"]:::plan
    __InputStaticLeaf78["__InputStaticLeaf[78∈0]"]:::plan
    __InputStaticLeaf80["__InputStaticLeaf[80∈0]"]:::plan
    __InputStaticLeaf81["__InputStaticLeaf[81∈0]"]:::plan
    __InputStaticLeaf83["__InputStaticLeaf[83∈0]"]:::plan
    __InputStaticLeaf84["__InputStaticLeaf[84∈0]"]:::plan
    __InputStaticLeaf90["__InputStaticLeaf[90∈0]"]:::plan
    __InputStaticLeaf91["__InputStaticLeaf[91∈0]"]:::plan
    __InputStaticLeaf92["__InputStaticLeaf[92∈0]"]:::plan
    Access94["Access[94∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access95["Access[95∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object96["Object[96∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    Object98["Object[98∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object99["Object[99∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object100["Object[100∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object101["Object[101∈0]<br />ᐸ{a,b}ᐳ"]:::plan
    Object102["Object[102∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object103["Object[103∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object104["Object[104∈0]<br />ᐸ{a,b}ᐳ"]:::plan
    Object105["Object[105∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object106["Object[106∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object107["Object[107∈0]<br />ᐸ{a,b}ᐳ"]:::plan
    Object108["Object[108∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object109["Object[109∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object110["Object[110∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object111["Object[111∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    List112["List[112∈0]<br />ᐸ108,109,110,111ᐳ"]:::plan
    Object113["Object[113∈0]<br />ᐸ{points,isOpen}ᐳ"]:::plan
    Object114["Object[114∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object115["Object[115∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object116["Object[116∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object117["Object[117∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    List118["List[118∈0]<br />ᐸ114,115,116,117ᐳ"]:::plan
    Object119["Object[119∈0]<br />ᐸ{points,isOpen}ᐳ"]:::plan
    Object120["Object[120∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object121["Object[121∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object122["Object[122∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object123["Object[123∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    List124["List[124∈0]<br />ᐸ120,121,122,123ᐳ"]:::plan
    Object125["Object[125∈0]<br />ᐸ{points}ᐳ"]:::plan
    Object126["Object[126∈0]<br />ᐸ{x,y}ᐳ"]:::plan
    Object127["Object[127∈0]<br />ᐸ{center,radius}ᐳ"]:::plan
    PgInsert93[["PgInsert[93∈1]"]]:::sideeffectplan
    Object97["Object[97∈1]<br />ᐸ{result}ᐳ"]:::plan
    PgClassExpression128["PgClassExpression[128∈1]<br />ᐸ__geom__.”id”ᐳ"]:::plan
    PgClassExpression129["PgClassExpression[129∈1]<br />ᐸ__geom__.”point”ᐳ"]:::plan
    Access130["Access[130∈1]<br />ᐸ129.xᐳ"]:::plan
    Access131["Access[131∈1]<br />ᐸ129.yᐳ"]:::plan
    PgClassExpression132["PgClassExpression[132∈1]<br />ᐸ__geom__.”line”ᐳ"]:::plan
    Access133["Access[133∈1]<br />ᐸ132.aᐳ"]:::plan
    Access134["Access[134∈1]<br />ᐸ133.xᐳ"]:::plan
    Access135["Access[135∈1]<br />ᐸ133.yᐳ"]:::plan
    Access136["Access[136∈1]<br />ᐸ132.bᐳ"]:::plan
    Access137["Access[137∈1]<br />ᐸ136.xᐳ"]:::plan
    Access138["Access[138∈1]<br />ᐸ136.yᐳ"]:::plan
    PgClassExpression139["PgClassExpression[139∈1]<br />ᐸ__geom__.”lseg”ᐳ"]:::plan
    Access140["Access[140∈1]<br />ᐸ139.aᐳ"]:::plan
    Access141["Access[141∈1]<br />ᐸ140.xᐳ"]:::plan
    Access142["Access[142∈1]<br />ᐸ140.yᐳ"]:::plan
    Access143["Access[143∈1]<br />ᐸ139.bᐳ"]:::plan
    Access144["Access[144∈1]<br />ᐸ143.xᐳ"]:::plan
    Access145["Access[145∈1]<br />ᐸ143.yᐳ"]:::plan
    PgClassExpression146["PgClassExpression[146∈1]<br />ᐸ__geom__.”box”ᐳ"]:::plan
    Access147["Access[147∈1]<br />ᐸ146.aᐳ"]:::plan
    Access148["Access[148∈1]<br />ᐸ147.xᐳ"]:::plan
    Access149["Access[149∈1]<br />ᐸ147.yᐳ"]:::plan
    Access150["Access[150∈1]<br />ᐸ146.bᐳ"]:::plan
    Access151["Access[151∈1]<br />ᐸ150.xᐳ"]:::plan
    Access152["Access[152∈1]<br />ᐸ150.yᐳ"]:::plan
    PgClassExpression153["PgClassExpression[153∈1]<br />ᐸ__geom__.”open_path”ᐳ"]:::plan
    Access154["Access[154∈1]<br />ᐸ153.isOpenᐳ"]:::plan
    Access155["Access[155∈1]<br />ᐸ153.pointsᐳ"]:::plan
    __Item156>"__Item[156∈2]<br />ᐸ155ᐳ"]:::itemplan
    Access157["Access[157∈2]<br />ᐸ156.xᐳ"]:::plan
    Access158["Access[158∈2]<br />ᐸ156.yᐳ"]:::plan
    PgClassExpression159["PgClassExpression[159∈1]<br />ᐸ__geom__.”closed_path”ᐳ"]:::plan
    Access160["Access[160∈1]<br />ᐸ159.isOpenᐳ"]:::plan
    Access161["Access[161∈1]<br />ᐸ159.pointsᐳ"]:::plan
    __Item162>"__Item[162∈3]<br />ᐸ161ᐳ"]:::itemplan
    Access163["Access[163∈3]<br />ᐸ162.xᐳ"]:::plan
    Access164["Access[164∈3]<br />ᐸ162.yᐳ"]:::plan
    PgClassExpression165["PgClassExpression[165∈1]<br />ᐸ__geom__.”polygon”ᐳ"]:::plan
    Access166["Access[166∈1]<br />ᐸ165.pointsᐳ"]:::plan
    __Item167>"__Item[167∈4]<br />ᐸ166ᐳ"]:::itemplan
    Access168["Access[168∈4]<br />ᐸ167.xᐳ"]:::plan
    Access169["Access[169∈4]<br />ᐸ167.yᐳ"]:::plan
    PgClassExpression170["PgClassExpression[170∈1]<br />ᐸ__geom__.”circle”ᐳ"]:::plan
    Access171["Access[171∈1]<br />ᐸ170.centerᐳ"]:::plan
    Access172["Access[172∈1]<br />ᐸ171.xᐳ"]:::plan
    Access173["Access[173∈1]<br />ᐸ171.yᐳ"]:::plan
    Access174["Access[174∈1]<br />ᐸ170.radiusᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access94
    __Value3 --> Access95
    Access94 & Access95 --> Object96
    __InputStaticLeaf12 & __InputStaticLeaf13 --> Object98
    __InputStaticLeaf16 & __InputStaticLeaf17 --> Object99
    __InputStaticLeaf19 & __InputStaticLeaf20 --> Object100
    Object99 & Object100 --> Object101
    __InputStaticLeaf23 & __InputStaticLeaf24 --> Object102
    __InputStaticLeaf26 & __InputStaticLeaf27 --> Object103
    Object102 & Object103 --> Object104
    __InputStaticLeaf30 & __InputStaticLeaf31 --> Object105
    __InputStaticLeaf33 & __InputStaticLeaf34 --> Object106
    Object105 & Object106 --> Object107
    __InputStaticLeaf38 & __InputStaticLeaf39 --> Object108
    __InputStaticLeaf41 & __InputStaticLeaf42 --> Object109
    __InputStaticLeaf44 & __InputStaticLeaf45 --> Object110
    __InputStaticLeaf47 & __InputStaticLeaf48 --> Object111
    Object108 & Object109 & Object110 & Object111 --> List112
    List112 & __InputStaticLeaf52 --> Object113
    __InputStaticLeaf56 & __InputStaticLeaf57 --> Object114
    __InputStaticLeaf59 & __InputStaticLeaf60 --> Object115
    __InputStaticLeaf62 & __InputStaticLeaf63 --> Object116
    __InputStaticLeaf65 & __InputStaticLeaf66 --> Object117
    Object114 & Object115 & Object116 & Object117 --> List118
    List118 & __InputStaticLeaf70 --> Object119
    __InputStaticLeaf74 & __InputStaticLeaf75 --> Object120
    __InputStaticLeaf77 & __InputStaticLeaf78 --> Object121
    __InputStaticLeaf80 & __InputStaticLeaf81 --> Object122
    __InputStaticLeaf83 & __InputStaticLeaf84 --> Object123
    Object120 & Object121 & Object122 & Object123 --> List124
    List124 --> Object125
    __InputStaticLeaf90 & __InputStaticLeaf91 --> Object126
    Object126 & __InputStaticLeaf92 --> Object127
    Object96 & Object98 & Object101 & Object104 & Object107 & Object113 & Object119 & Object125 & Object127 --> PgInsert93
    PgInsert93 --> Object97
    PgInsert93 --> PgClassExpression128
    PgInsert93 --> PgClassExpression129
    PgClassExpression129 --> Access130
    PgClassExpression129 --> Access131
    PgInsert93 --> PgClassExpression132
    PgClassExpression132 --> Access133
    Access133 --> Access134
    Access133 --> Access135
    PgClassExpression132 --> Access136
    Access136 --> Access137
    Access136 --> Access138
    PgInsert93 --> PgClassExpression139
    PgClassExpression139 --> Access140
    Access140 --> Access141
    Access140 --> Access142
    PgClassExpression139 --> Access143
    Access143 --> Access144
    Access143 --> Access145
    PgInsert93 --> PgClassExpression146
    PgClassExpression146 --> Access147
    Access147 --> Access148
    Access147 --> Access149
    PgClassExpression146 --> Access150
    Access150 --> Access151
    Access150 --> Access152
    PgInsert93 --> PgClassExpression153
    PgClassExpression153 --> Access154
    PgClassExpression153 --> Access155
    Access155 ==> __Item156
    __Item156 --> Access157
    __Item156 --> Access158
    PgInsert93 --> PgClassExpression159
    PgClassExpression159 --> Access160
    PgClassExpression159 --> Access161
    Access161 ==> __Item162
    __Item162 --> Access163
    __Item162 --> Access164
    PgInsert93 --> PgClassExpression165
    PgClassExpression165 --> Access166
    Access166 ==> __Item167
    __Item167 --> Access168
    __Item167 --> Access169
    PgInsert93 --> PgClassExpression170
    PgClassExpression170 --> Access171
    Access171 --> Access172
    Access171 --> Access173
    PgClassExpression170 --> Access174

    %% plan-to-path relationships

    subgraph "Buckets for mutations/v4/geometry.mutations"
    Bucket0("Bucket 0<br />(root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,__InputStaticLeaf12,__InputStaticLeaf13,__InputStaticLeaf16,__InputStaticLeaf17,__InputStaticLeaf19,__InputStaticLeaf20,__InputStaticLeaf23,__InputStaticLeaf24,__InputStaticLeaf26,__InputStaticLeaf27,__InputStaticLeaf30,__InputStaticLeaf31,__InputStaticLeaf33,__InputStaticLeaf34,__InputStaticLeaf38,__InputStaticLeaf39,__InputStaticLeaf41,__InputStaticLeaf42,__InputStaticLeaf44,__InputStaticLeaf45,__InputStaticLeaf47,__InputStaticLeaf48,__InputStaticLeaf52,__InputStaticLeaf56,__InputStaticLeaf57,__InputStaticLeaf59,__InputStaticLeaf60,__InputStaticLeaf62,__InputStaticLeaf63,__InputStaticLeaf65,__InputStaticLeaf66,__InputStaticLeaf70,__InputStaticLeaf74,__InputStaticLeaf75,__InputStaticLeaf77,__InputStaticLeaf78,__InputStaticLeaf80,__InputStaticLeaf81,__InputStaticLeaf83,__InputStaticLeaf84,__InputStaticLeaf90,__InputStaticLeaf91,__InputStaticLeaf92,Access94,Access95,Object96,Object98,Object99,Object100,Object101,Object102,Object103,Object104,Object105,Object106,Object107,Object108,Object109,Object110,Object111,List112,Object113,Object114,Object115,Object116,Object117,List118,Object119,Object120,Object121,Object122,Object123,List124,Object125,Object126,Object127 bucket0
    Bucket1("Bucket 1<br />(mutationField)<br />Deps: 96, 98, 101, 104, 107, 113, 119, 125, 127<br /><br />1: PgInsert{1}[93]<br />2: Object{1}ᐸ{result}ᐳ[97],PgClassExpression{1}ᐸ__geom__.”id”ᐳ[128],PgClassExpression{1}ᐸ__geom__.”point”ᐳ[129],PgClassExpression{1}ᐸ__geom__.”line”ᐳ[132],PgClassExpression{1}ᐸ__geom__.”lseg”ᐳ[139],PgClassExpression{1}ᐸ__geom__.”box”ᐳ[146],PgClassExpression{1}ᐸ__geom__.”open_path”ᐳ[153],PgClassExpression{1}ᐸ__geom__.”closed_path”ᐳ[159],PgClassExpression{1}ᐸ__geom__.”polygon”ᐳ[165],PgClassExpression{1}ᐸ__geom__.”circle”ᐳ[170]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgInsert93,Object97,PgClassExpression128,PgClassExpression129,Access130,Access131,PgClassExpression132,Access133,Access134,Access135,Access136,Access137,Access138,PgClassExpression139,Access140,Access141,Access142,Access143,Access144,Access145,PgClassExpression146,Access147,Access148,Access149,Access150,Access151,Access152,PgClassExpression153,Access154,Access155,PgClassExpression159,Access160,Access161,PgClassExpression165,Access166,PgClassExpression170,Access171,Access172,Access173,Access174 bucket1
    Bucket2("Bucket 2<br />(listItem)<br />ROOT __Item{2}ᐸ155ᐳ[156]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item156,Access157,Access158 bucket2
    Bucket3("Bucket 3<br />(listItem)<br />ROOT __Item{3}ᐸ161ᐳ[162]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,__Item162,Access163,Access164 bucket3
    Bucket4("Bucket 4<br />(listItem)<br />ROOT __Item{4}ᐸ166ᐳ[167]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item167,Access168,Access169 bucket4
    Bucket0 --> Bucket1
    Bucket1 --> Bucket2 & Bucket3 & Bucket4
    end
