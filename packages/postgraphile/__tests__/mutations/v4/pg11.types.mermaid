graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define steps
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    __Value5["__Value[5∈0]<br />ᐸrootValueᐳ"]:::plan
    __InputStaticLeaf9["__InputStaticLeaf[9∈0]"]:::plan
    __InputStaticLeaf12["__InputStaticLeaf[12∈0]"]:::plan
    __InputStaticLeaf13["__InputStaticLeaf[13∈0]"]:::plan
    __InputStaticLeaf15["__InputStaticLeaf[15∈0]"]:::plan
    __InputStaticLeaf16["__InputStaticLeaf[16∈0]"]:::plan
    __InputStaticLeaf17["__InputStaticLeaf[17∈0]"]:::plan
    __InputStaticLeaf20["__InputStaticLeaf[20∈0]"]:::plan
    Access35["Access[35∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access36["Access[36∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object37["Object[37∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    List39["List[39∈0]<br />ᐸ15,16,17ᐳ"]:::plan
    Object40["Object[40∈0]<br />ᐸ{a}ᐳ"]:::plan
    PgUpdate34[["PgUpdate[34∈1]"]]:::sideeffectplan
    Object38["Object[38∈1]<br />ᐸ{result}ᐳ"]:::plan
    PgClassExpression41["PgClassExpression[41∈1]<br />ᐸ__types__.”id”ᐳ"]:::plan
    PgClassExpression42["PgClassExpression[42∈1]<br />ᐸ__types__.”regrole”ᐳ"]:::plan
    PgClassExpression43["PgClassExpression[43∈1]<br />ᐸ__types__....namespace”ᐳ"]:::plan
    PgClassExpression44["PgClassExpression[44∈1]<br />ᐸ__types__....ay_domain”ᐳ"]:::plan
    __Item45>"__Item[45∈2]<br />ᐸ44ᐳ"]:::itemplan
    PgClassExpression46["PgClassExpression[46∈1]<br />ᐸ__types__....ound_type”ᐳ"]:::plan
    PgSelect47[["PgSelect[47∈1]<br />ᐸTemporarySource1ᐳ"]]:::plan
    First51["First[51∈1]"]:::plan
    PgSelectSingle52["PgSelectSingle[52∈1]<br />ᐸTemporarySource1ᐳ"]:::plan
    PgClassExpression53["PgClassExpression[53∈1]<br />ᐸ__temporar...rce1__.”a”ᐳ"]:::plan
    PgClassExpression54["PgClassExpression[54∈1]<br />ᐸ__temporar...rce1__.”b”ᐳ"]:::plan
    PgClassExpression55["PgClassExpression[55∈1]<br />ᐸ__temporar...rce1__.”c”ᐳ"]:::plan
    PgClassExpression56["PgClassExpression[56∈1]<br />ᐸ__temporar...rce1__.”d”ᐳ"]:::plan
    PgClassExpression57["PgClassExpression[57∈1]<br />ᐸ__temporar...rce1__.”e”ᐳ"]:::plan
    PgClassExpression58["PgClassExpression[58∈1]<br />ᐸ__temporar...rce1__.”f”ᐳ"]:::plan
    PgClassExpression59["PgClassExpression[59∈1]<br />ᐸ__temporar....”foo_bar”ᐳ"]:::plan
    __InputStaticLeaf64["__InputStaticLeaf[64∈0]"]:::plan
    __InputStaticLeaf65["__InputStaticLeaf[65∈0]"]:::plan
    __InputStaticLeaf67["__InputStaticLeaf[67∈0]"]:::plan
    __InputStaticLeaf68["__InputStaticLeaf[68∈0]"]:::plan
    __InputStaticLeaf69["__InputStaticLeaf[69∈0]"]:::plan
    __InputStaticLeaf72["__InputStaticLeaf[72∈0]"]:::plan
    List91["List[91∈0]<br />ᐸ67,68,69ᐳ"]:::plan
    Object92["Object[92∈0]<br />ᐸ{a}ᐳ"]:::plan
    PgInsert86[["PgInsert[86∈3]"]]:::sideeffectplan
    Object90["Object[90∈3]<br />ᐸ{result}ᐳ"]:::plan
    PgClassExpression93["PgClassExpression[93∈3]<br />ᐸ__types__.”id”ᐳ"]:::plan
    PgClassExpression94["PgClassExpression[94∈3]<br />ᐸ__types__.”regrole”ᐳ"]:::plan
    PgClassExpression95["PgClassExpression[95∈3]<br />ᐸ__types__....namespace”ᐳ"]:::plan
    PgClassExpression96["PgClassExpression[96∈3]<br />ᐸ__types__....ay_domain”ᐳ"]:::plan
    __Item97>"__Item[97∈4]<br />ᐸ96ᐳ"]:::itemplan
    PgClassExpression98["PgClassExpression[98∈3]<br />ᐸ__types__....ound_type”ᐳ"]:::plan
    PgSelect99[["PgSelect[99∈3]<br />ᐸTemporarySource1ᐳ"]]:::plan
    First103["First[103∈3]"]:::plan
    PgSelectSingle104["PgSelectSingle[104∈3]<br />ᐸTemporarySource1ᐳ"]:::plan
    PgClassExpression105["PgClassExpression[105∈3]<br />ᐸ__temporar...rce1__.”a”ᐳ"]:::plan
    PgClassExpression106["PgClassExpression[106∈3]<br />ᐸ__temporar...rce1__.”b”ᐳ"]:::plan
    PgClassExpression107["PgClassExpression[107∈3]<br />ᐸ__temporar...rce1__.”c”ᐳ"]:::plan
    PgClassExpression108["PgClassExpression[108∈3]<br />ᐸ__temporar...rce1__.”d”ᐳ"]:::plan
    PgClassExpression109["PgClassExpression[109∈3]<br />ᐸ__temporar...rce1__.”e”ᐳ"]:::plan
    PgClassExpression110["PgClassExpression[110∈3]<br />ᐸ__temporar...rce1__.”f”ᐳ"]:::plan
    PgClassExpression111["PgClassExpression[111∈3]<br />ᐸ__temporar....”foo_bar”ᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access35
    __Value3 --> Access36
    Access35 & Access36 --> Object37
    __InputStaticLeaf15 & __InputStaticLeaf16 & __InputStaticLeaf17 --> List39
    __InputStaticLeaf20 --> Object40
    Object37 & __InputStaticLeaf9 & __InputStaticLeaf12 & __InputStaticLeaf13 & List39 & Object40 --> PgUpdate34
    PgUpdate34 --> Object38
    PgUpdate34 --> PgClassExpression41
    PgUpdate34 --> PgClassExpression42
    PgUpdate34 --> PgClassExpression43
    PgUpdate34 --> PgClassExpression44
    PgClassExpression44 ==> __Item45
    PgUpdate34 --> PgClassExpression46
    Object37 & PgClassExpression46 --> PgSelect47
    PgSelect47 --> First51
    First51 --> PgSelectSingle52
    PgSelectSingle52 --> PgClassExpression53
    PgSelectSingle52 --> PgClassExpression54
    PgSelectSingle52 --> PgClassExpression55
    PgSelectSingle52 --> PgClassExpression56
    PgSelectSingle52 --> PgClassExpression57
    PgSelectSingle52 --> PgClassExpression58
    PgSelectSingle52 --> PgClassExpression59
    __InputStaticLeaf67 & __InputStaticLeaf68 & __InputStaticLeaf69 --> List91
    __InputStaticLeaf72 --> Object92
    Object37 & __InputStaticLeaf64 & __InputStaticLeaf65 & List91 & Object92 --> PgInsert86
    PgInsert86 --> Object90
    PgInsert86 --> PgClassExpression93
    PgInsert86 --> PgClassExpression94
    PgInsert86 --> PgClassExpression95
    PgInsert86 --> PgClassExpression96
    PgClassExpression96 ==> __Item97
    PgInsert86 --> PgClassExpression98
    Object37 & PgClassExpression98 --> PgSelect99
    PgSelect99 --> First103
    First103 --> PgSelectSingle104
    PgSelectSingle104 --> PgClassExpression105
    PgSelectSingle104 --> PgClassExpression106
    PgSelectSingle104 --> PgClassExpression107
    PgSelectSingle104 --> PgClassExpression108
    PgSelectSingle104 --> PgClassExpression109
    PgSelectSingle104 --> PgClassExpression110
    PgSelectSingle104 --> PgClassExpression111

    %% plan-to-path relationships

    subgraph "Buckets for mutations/v4/pg11.types"
    Bucket0("Bucket 0<br />(root)"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value3,__Value5,__InputStaticLeaf9,__InputStaticLeaf12,__InputStaticLeaf13,__InputStaticLeaf15,__InputStaticLeaf16,__InputStaticLeaf17,__InputStaticLeaf20,Access35,Access36,Object37,List39,Object40,__InputStaticLeaf64,__InputStaticLeaf65,__InputStaticLeaf67,__InputStaticLeaf68,__InputStaticLeaf69,__InputStaticLeaf72,List91,Object92 bucket0
    Bucket1("Bucket 1<br />(mutationField)<br />Deps: 37, 9, 12, 13, 39, 40<br /><br />1: PgUpdate{1}[34]<br />2: Object{1}ᐸ{result}ᐳ[38],PgClassExpression{1}ᐸ__types__.”id”ᐳ[41],PgClassExpression{1}ᐸ__types__.”regrole”ᐳ[42],PgClassExpression{1}ᐸ__types__....namespace”ᐳ[43],PgClassExpression{1}ᐸ__types__....ay_domain”ᐳ[44],PgClassExpression{1}ᐸ__types__....ound_type”ᐳ[46]"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,PgUpdate34,Object38,PgClassExpression41,PgClassExpression42,PgClassExpression43,PgClassExpression44,PgClassExpression46,PgSelect47,First51,PgSelectSingle52,PgClassExpression53,PgClassExpression54,PgClassExpression55,PgClassExpression56,PgClassExpression57,PgClassExpression58,PgClassExpression59 bucket1
    Bucket2("Bucket 2<br />(listItem)<br />ROOT __Item{2}ᐸ44ᐳ[45]"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item45 bucket2
    Bucket3("Bucket 3<br />(mutationField)<br />Deps: 37, 64, 65, 91, 92<br /><br />1: PgInsert{3}[86]<br />2: Object{3}ᐸ{result}ᐳ[90],PgClassExpression{3}ᐸ__types__.”id”ᐳ[93],PgClassExpression{3}ᐸ__types__.”regrole”ᐳ[94],PgClassExpression{3}ᐸ__types__....namespace”ᐳ[95],PgClassExpression{3}ᐸ__types__....ay_domain”ᐳ[96],PgClassExpression{3}ᐸ__types__....ound_type”ᐳ[98]"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,PgInsert86,Object90,PgClassExpression93,PgClassExpression94,PgClassExpression95,PgClassExpression96,PgClassExpression98,PgSelect99,First103,PgSelectSingle104,PgClassExpression105,PgClassExpression106,PgClassExpression107,PgClassExpression108,PgClassExpression109,PgClassExpression110,PgClassExpression111 bucket3
    Bucket4("Bucket 4<br />(listItem)<br />ROOT __Item{4}ᐸ96ᐳ[97]"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item97 bucket4
    Bucket0 --> Bucket1 & Bucket3
    Bucket1 --> Bucket2
    Bucket3 --> Bucket4
    end
