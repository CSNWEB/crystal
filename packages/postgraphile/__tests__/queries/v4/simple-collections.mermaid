graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define plans
    __Value0["__Value[0∈0]"]:::plan
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    Access24["Access[24∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access25["Access[25∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object26["Object[26∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    PgSelect23[["PgSelect[23∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item27>"__Item[27∈1]<br />ᐸ23ᐳ"]:::itemplan
    PgSelectSingle28["PgSelectSingle[28∈1]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression29["PgClassExpression[29∈1]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression30["PgClassExpression[30∈1]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression31["PgClassExpression[31∈1]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect48[["PgSelect[48∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item52>"__Item[52∈2]<br />ᐸ48ᐳ"]:::itemplan
    PgSelectSingle53["PgSelectSingle[53∈2]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression54["PgClassExpression[54∈2]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression55["PgClassExpression[55∈2]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression56["PgClassExpression[56∈2]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect74[["PgSelect[74∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item78>"__Item[78∈3]<br />ᐸ74ᐳ"]:::itemplan
    PgSelectSingle79["PgSelectSingle[79∈3]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression80["PgClassExpression[80∈3]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression81["PgClassExpression[81∈3]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression82["PgClassExpression[82∈3]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect100[["PgSelect[100∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item104>"__Item[104∈4]<br />ᐸ100ᐳ"]:::itemplan
    PgSelectSingle105["PgSelectSingle[105∈4]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression106["PgClassExpression[106∈4]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression107["PgClassExpression[107∈4]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression108["PgClassExpression[108∈4]<br />ᐸ__person__.”email”ᐳ"]:::plan
    __InputStaticLeaf115["__InputStaticLeaf[115∈0]"]:::plan
    PgSelect119[["PgSelect[119∈0]<br />ᐸpostᐳ"]]:::plan
    __Item123>"__Item[123∈5]<br />ᐸ119ᐳ"]:::itemplan
    PgSelectSingle124["PgSelectSingle[124∈5]<br />ᐸpostᐳ"]:::plan
    PgClassExpression125["PgClassExpression[125∈5]<br />ᐸ__post__.”headline”ᐳ"]:::plan
    PgClassExpression126["PgClassExpression[126∈5]<br />ᐸ__post__.”author_id”ᐳ"]:::plan
    __InputStaticLeaf133["__InputStaticLeaf[133∈0]"]:::plan
    PgSelect137[["PgSelect[137∈0]<br />ᐸpostᐳ"]]:::plan
    __Item141>"__Item[141∈6]<br />ᐸ137ᐳ"]:::itemplan
    PgSelectSingle142["PgSelectSingle[142∈6]<br />ᐸpostᐳ"]:::plan
    PgClassExpression143["PgClassExpression[143∈6]<br />ᐸ__post__.”headline”ᐳ"]:::plan
    PgClassExpression144["PgClassExpression[144∈6]<br />ᐸ__post__.”author_id”ᐳ"]:::plan
    PgSelect161[["PgSelect[161∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item165>"__Item[165∈7]<br />ᐸ161ᐳ"]:::itemplan
    PgSelectSingle166["PgSelectSingle[166∈7]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression167["PgClassExpression[167∈7]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression168["PgClassExpression[168∈7]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression169["PgClassExpression[169∈7]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect186[["PgSelect[186∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item190>"__Item[190∈8]<br />ᐸ186ᐳ"]:::itemplan
    PgSelectSingle191["PgSelectSingle[191∈8]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression192["PgClassExpression[192∈8]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression193["PgClassExpression[193∈8]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression194["PgClassExpression[194∈8]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect236[["PgSelect[236∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item240>"__Item[240∈9]<br />ᐸ236ᐳ"]:::itemplan
    PgSelectSingle241["PgSelectSingle[241∈9]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression242["PgClassExpression[242∈9]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression243["PgClassExpression[243∈9]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression244["PgClassExpression[244∈9]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect257[["PgSelect[257∈0]<br />ᐸpostᐳ"]]:::plan
    __Item261>"__Item[261∈10]<br />ᐸ257ᐳ"]:::itemplan
    PgSelectSingle262["PgSelectSingle[262∈10]<br />ᐸpostᐳ"]:::plan
    PgClassExpression263["PgClassExpression[263∈10]<br />ᐸ__post__.”headline”ᐳ"]:::plan
    PgClassExpression264["PgClassExpression[264∈10]<br />ᐸ__post__.”author_id”ᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access24
    __Value3 --> Access25
    Access24 & Access25 --> Object26
    Object26 --> PgSelect23
    PgSelect23 ==> __Item27
    __Item27 --> PgSelectSingle28
    PgSelectSingle28 --> PgClassExpression29
    PgSelectSingle28 --> PgClassExpression30
    PgSelectSingle28 --> PgClassExpression31
    Object26 --> PgSelect48
    PgSelect48 ==> __Item52
    __Item52 --> PgSelectSingle53
    PgSelectSingle53 --> PgClassExpression54
    PgSelectSingle53 --> PgClassExpression55
    PgSelectSingle53 --> PgClassExpression56
    Object26 --> PgSelect74
    PgSelect74 ==> __Item78
    __Item78 --> PgSelectSingle79
    PgSelectSingle79 --> PgClassExpression80
    PgSelectSingle79 --> PgClassExpression81
    PgSelectSingle79 --> PgClassExpression82
    Object26 --> PgSelect100
    PgSelect100 ==> __Item104
    __Item104 --> PgSelectSingle105
    PgSelectSingle105 --> PgClassExpression106
    PgSelectSingle105 --> PgClassExpression107
    PgSelectSingle105 --> PgClassExpression108
    Object26 & __InputStaticLeaf115 --> PgSelect119
    PgSelect119 ==> __Item123
    __Item123 --> PgSelectSingle124
    PgSelectSingle124 --> PgClassExpression125
    PgSelectSingle124 --> PgClassExpression126
    Object26 & __InputStaticLeaf133 --> PgSelect137
    PgSelect137 ==> __Item141
    __Item141 --> PgSelectSingle142
    PgSelectSingle142 --> PgClassExpression143
    PgSelectSingle142 --> PgClassExpression144
    Object26 --> PgSelect161
    PgSelect161 ==> __Item165
    __Item165 --> PgSelectSingle166
    PgSelectSingle166 --> PgClassExpression167
    PgSelectSingle166 --> PgClassExpression168
    PgSelectSingle166 --> PgClassExpression169
    Object26 --> PgSelect186
    PgSelect186 ==> __Item190
    __Item190 --> PgSelectSingle191
    PgSelectSingle191 --> PgClassExpression192
    PgSelectSingle191 --> PgClassExpression193
    PgSelectSingle191 --> PgClassExpression194
    Object26 --> PgSelect236
    PgSelect236 ==> __Item240
    __Item240 --> PgSelectSingle241
    PgSelectSingle241 --> PgClassExpression242
    PgSelectSingle241 --> PgClassExpression243
    PgSelectSingle241 --> PgClassExpression244
    Object26 --> PgSelect257
    PgSelect257 ==> __Item261
    __Item261 --> PgSelectSingle262
    PgSelectSingle262 --> PgClassExpression263
    PgSelectSingle262 --> PgClassExpression264

    %% plan-to-path relationships
    P0["~"]
    __Value0 -.-> P0
    P23["ᐳa<br />ᐳi"]
    PgSelect23 -.-> P23
    P28["ᐳa[]<br />ᐳi[]"]
    PgSelectSingle28 -.-> P28
    P29["ᐳa[]ᐳid<br />ᐳi[]ᐳid"]
    PgClassExpression29 -.-> P29
    P30["ᐳa[]ᐳname<br />ᐳi[]ᐳname"]
    PgClassExpression30 -.-> P30
    P31["ᐳa[]ᐳemail<br />ᐳi[]ᐳemail"]
    PgClassExpression31 -.-> P31
    P48["ᐳb"]
    PgSelect48 -.-> P48
    P53["ᐳb[]"]
    PgSelectSingle53 -.-> P53
    P54["ᐳb[]ᐳid"]
    PgClassExpression54 -.-> P54
    P55["ᐳb[]ᐳname"]
    PgClassExpression55 -.-> P55
    P56["ᐳb[]ᐳemail"]
    PgClassExpression56 -.-> P56
    P74["ᐳc"]
    PgSelect74 -.-> P74
    P79["ᐳc[]"]
    PgSelectSingle79 -.-> P79
    P80["ᐳc[]ᐳid"]
    PgClassExpression80 -.-> P80
    P81["ᐳc[]ᐳname"]
    PgClassExpression81 -.-> P81
    P82["ᐳc[]ᐳemail"]
    PgClassExpression82 -.-> P82
    P100["ᐳd"]
    PgSelect100 -.-> P100
    P105["ᐳd[]"]
    PgSelectSingle105 -.-> P105
    P106["ᐳd[]ᐳid"]
    PgClassExpression106 -.-> P106
    P107["ᐳd[]ᐳname"]
    PgClassExpression107 -.-> P107
    P108["ᐳd[]ᐳemail"]
    PgClassExpression108 -.-> P108
    P119["ᐳe"]
    PgSelect119 -.-> P119
    P124["ᐳe[]"]
    PgSelectSingle124 -.-> P124
    P125["ᐳe[]ᐳheadline"]
    PgClassExpression125 -.-> P125
    P126["ᐳe[]ᐳauthorId"]
    PgClassExpression126 -.-> P126
    P137["ᐳf"]
    PgSelect137 -.-> P137
    P142["ᐳf[]"]
    PgSelectSingle142 -.-> P142
    P143["ᐳf[]ᐳheadline"]
    PgClassExpression143 -.-> P143
    P144["ᐳf[]ᐳauthorId"]
    PgClassExpression144 -.-> P144
    P161["ᐳg"]
    PgSelect161 -.-> P161
    P166["ᐳg[]"]
    PgSelectSingle166 -.-> P166
    P167["ᐳg[]ᐳid"]
    PgClassExpression167 -.-> P167
    P168["ᐳg[]ᐳname"]
    PgClassExpression168 -.-> P168
    P169["ᐳg[]ᐳemail"]
    PgClassExpression169 -.-> P169
    P186["ᐳh"]
    PgSelect186 -.-> P186
    P191["ᐳh[]"]
    PgSelectSingle191 -.-> P191
    P192["ᐳh[]ᐳid"]
    PgClassExpression192 -.-> P192
    P193["ᐳh[]ᐳname"]
    PgClassExpression193 -.-> P193
    P194["ᐳh[]ᐳemail"]
    PgClassExpression194 -.-> P194
    P236["ᐳj"]
    PgSelect236 -.-> P236
    P241["ᐳj[]"]
    PgSelectSingle241 -.-> P241
    P242["ᐳj[]ᐳid"]
    PgClassExpression242 -.-> P242
    P243["ᐳj[]ᐳname"]
    PgClassExpression243 -.-> P243
    P244["ᐳj[]ᐳemail"]
    PgClassExpression244 -.-> P244
    P257["ᐳk"]
    PgSelect257 -.-> P257
    P262["ᐳk[]"]
    PgSelectSingle262 -.-> P262
    P263["ᐳk[]ᐳheadline"]
    PgClassExpression263 -.-> P263
    P264["ᐳk[]ᐳauthorId"]
    PgClassExpression264 -.-> P264

    subgraph "Buckets for queries/v4/simple-collections"
    Bucket0("Bucket 0 (root)<br />~<br />⠀ROOT ᐸ-O- 0<br />⠀⠀a ᐸ-A- 23<br />⠀⠀i ᐸ-A- 23<br />⠀⠀b ᐸ-A- 48<br />⠀⠀c ᐸ-A- 74<br />⠀⠀d ᐸ-A- 100<br />⠀⠀e ᐸ-A- 119<br />⠀⠀f ᐸ-A- 137<br />⠀⠀g ᐸ-A- 161<br />⠀⠀h ᐸ-A- 186<br />⠀⠀j ᐸ-A- 236<br />⠀⠀k ᐸ-A- 257"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value3,PgSelect23,Access24,Access25,Object26,PgSelect48,PgSelect74,PgSelect100,__InputStaticLeaf115,PgSelect119,__InputStaticLeaf133,PgSelect137,PgSelect161,PgSelect186,PgSelect236,PgSelect257 bucket0
    Bucket1("Bucket 1 (item27)<br />Deps: 23<br />~ᐳQuery.a[]<br />~ᐳQuery.i[]<br />⠀ROOT ᐸ-O- 28<br />⠀⠀id ᐸ-L- 29<br />⠀⠀name ᐸ-L- 30<br />⠀⠀email ᐸ-L- 31"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item27,PgSelectSingle28,PgClassExpression29,PgClassExpression30,PgClassExpression31 bucket1
    Bucket2("Bucket 2 (item52)<br />Deps: 48<br />~ᐳQuery.b[]<br />⠀ROOT ᐸ-O- 53<br />⠀⠀id ᐸ-L- 54<br />⠀⠀name ᐸ-L- 55<br />⠀⠀email ᐸ-L- 56"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item52,PgSelectSingle53,PgClassExpression54,PgClassExpression55,PgClassExpression56 bucket2
    Bucket3("Bucket 3 (item78)<br />Deps: 74<br />~ᐳQuery.c[]<br />⠀ROOT ᐸ-O- 79<br />⠀⠀id ᐸ-L- 80<br />⠀⠀name ᐸ-L- 81<br />⠀⠀email ᐸ-L- 82"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,__Item78,PgSelectSingle79,PgClassExpression80,PgClassExpression81,PgClassExpression82 bucket3
    Bucket4("Bucket 4 (item104)<br />Deps: 100<br />~ᐳQuery.d[]<br />⠀ROOT ᐸ-O- 105<br />⠀⠀id ᐸ-L- 106<br />⠀⠀name ᐸ-L- 107<br />⠀⠀email ᐸ-L- 108"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item104,PgSelectSingle105,PgClassExpression106,PgClassExpression107,PgClassExpression108 bucket4
    Bucket5("Bucket 5 (item123)<br />Deps: 119<br />~ᐳQuery.e[]<br />⠀ROOT ᐸ-O- 124<br />⠀⠀headline ᐸ-L- 125<br />⠀⠀authorId ᐸ-L- 126"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item123,PgSelectSingle124,PgClassExpression125,PgClassExpression126 bucket5
    Bucket6("Bucket 6 (item141)<br />Deps: 137<br />~ᐳQuery.f[]<br />⠀ROOT ᐸ-O- 142<br />⠀⠀headline ᐸ-L- 143<br />⠀⠀authorId ᐸ-L- 144"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,__Item141,PgSelectSingle142,PgClassExpression143,PgClassExpression144 bucket6
    Bucket7("Bucket 7 (item165)<br />Deps: 161<br />~ᐳQuery.g[]<br />⠀ROOT ᐸ-O- 166<br />⠀⠀id ᐸ-L- 167<br />⠀⠀name ᐸ-L- 168<br />⠀⠀email ᐸ-L- 169"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,__Item165,PgSelectSingle166,PgClassExpression167,PgClassExpression168,PgClassExpression169 bucket7
    Bucket8("Bucket 8 (item190)<br />Deps: 186<br />~ᐳQuery.h[]<br />⠀ROOT ᐸ-O- 191<br />⠀⠀id ᐸ-L- 192<br />⠀⠀name ᐸ-L- 193<br />⠀⠀email ᐸ-L- 194"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item190,PgSelectSingle191,PgClassExpression192,PgClassExpression193,PgClassExpression194 bucket8
    Bucket9("Bucket 9 (item240)<br />Deps: 236<br />~ᐳQuery.j[]<br />⠀ROOT ᐸ-O- 241<br />⠀⠀id ᐸ-L- 242<br />⠀⠀name ᐸ-L- 243<br />⠀⠀email ᐸ-L- 244"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item240,PgSelectSingle241,PgClassExpression242,PgClassExpression243,PgClassExpression244 bucket9
    Bucket10("Bucket 10 (item261)<br />Deps: 257<br />~ᐳQuery.k[]<br />⠀ROOT ᐸ-O- 262<br />⠀⠀headline ᐸ-L- 263<br />⠀⠀authorId ᐸ-L- 264"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,__Item261,PgSelectSingle262,PgClassExpression263,PgClassExpression264 bucket10
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7 & Bucket8 & Bucket9 & Bucket10
    end
