graph TD
    classDef path fill:#eee,stroke:#000,color:#000
    classDef plan fill:#fff,stroke-width:3px,color:#000
    classDef itemplan fill:#fff,stroke-width:6px,color:#000
    classDef sideeffectplan fill:#f00,stroke-width:6px,color:#000
    classDef bucket fill:#f6f6f6,color:#000,stroke-width:6px,text-align:left


    %% define plans
    __Value0["__Value[0∈0]"]:::plan
    __Value3["__Value[3∈0]<br />ᐸcontextᐳ"]:::plan
    Access25["Access[25∈0]<br />ᐸ3.pgSettingsᐳ"]:::plan
    Access26["Access[26∈0]<br />ᐸ3.withPgClientᐳ"]:::plan
    Object27["Object[27∈0]<br />ᐸ{pgSettings,withPgClient}ᐳ"]:::plan
    PgSelect24[["PgSelect[24∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item28>"__Item[28∈1]<br />ᐸ24ᐳ"]:::itemplan
    PgSelectSingle29["PgSelectSingle[29∈1]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression30["PgClassExpression[30∈1]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression31["PgClassExpression[31∈1]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression32["PgClassExpression[32∈1]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect50[["PgSelect[50∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item54>"__Item[54∈2]<br />ᐸ50ᐳ"]:::itemplan
    PgSelectSingle55["PgSelectSingle[55∈2]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression56["PgClassExpression[56∈2]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression57["PgClassExpression[57∈2]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression58["PgClassExpression[58∈2]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect77[["PgSelect[77∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item81>"__Item[81∈3]<br />ᐸ77ᐳ"]:::itemplan
    PgSelectSingle82["PgSelectSingle[82∈3]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression83["PgClassExpression[83∈3]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression84["PgClassExpression[84∈3]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression85["PgClassExpression[85∈3]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect104[["PgSelect[104∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item108>"__Item[108∈4]<br />ᐸ104ᐳ"]:::itemplan
    PgSelectSingle109["PgSelectSingle[109∈4]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression110["PgClassExpression[110∈4]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression111["PgClassExpression[111∈4]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression112["PgClassExpression[112∈4]<br />ᐸ__person__.”email”ᐳ"]:::plan
    __InputStaticLeaf119["__InputStaticLeaf[119∈0]"]:::plan
    PgSelect123[["PgSelect[123∈0]<br />ᐸpostᐳ"]]:::plan
    __Item127>"__Item[127∈5]<br />ᐸ123ᐳ"]:::itemplan
    PgSelectSingle128["PgSelectSingle[128∈5]<br />ᐸpostᐳ"]:::plan
    PgClassExpression129["PgClassExpression[129∈5]<br />ᐸ__post__.”headline”ᐳ"]:::plan
    PgClassExpression130["PgClassExpression[130∈5]<br />ᐸ__post__.”author_id”ᐳ"]:::plan
    __InputStaticLeaf137["__InputStaticLeaf[137∈0]"]:::plan
    PgSelect141[["PgSelect[141∈0]<br />ᐸpostᐳ"]]:::plan
    __Item145>"__Item[145∈6]<br />ᐸ141ᐳ"]:::itemplan
    PgSelectSingle146["PgSelectSingle[146∈6]<br />ᐸpostᐳ"]:::plan
    PgClassExpression147["PgClassExpression[147∈6]<br />ᐸ__post__.”headline”ᐳ"]:::plan
    PgClassExpression148["PgClassExpression[148∈6]<br />ᐸ__post__.”author_id”ᐳ"]:::plan
    PgSelect166[["PgSelect[166∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item170>"__Item[170∈7]<br />ᐸ166ᐳ"]:::itemplan
    PgSelectSingle171["PgSelectSingle[171∈7]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression172["PgClassExpression[172∈7]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression173["PgClassExpression[173∈7]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression174["PgClassExpression[174∈7]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect192[["PgSelect[192∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item196>"__Item[196∈8]<br />ᐸ192ᐳ"]:::itemplan
    PgSelectSingle197["PgSelectSingle[197∈8]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression198["PgClassExpression[198∈8]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression199["PgClassExpression[199∈8]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression200["PgClassExpression[200∈8]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect244[["PgSelect[244∈0]<br />ᐸpersonᐳ"]]:::plan
    __Item248>"__Item[248∈9]<br />ᐸ244ᐳ"]:::itemplan
    PgSelectSingle249["PgSelectSingle[249∈9]<br />ᐸpersonᐳ"]:::plan
    PgClassExpression250["PgClassExpression[250∈9]<br />ᐸ__person__.”id”ᐳ"]:::plan
    PgClassExpression251["PgClassExpression[251∈9]<br />ᐸ__person__...full_name”ᐳ"]:::plan
    PgClassExpression252["PgClassExpression[252∈9]<br />ᐸ__person__.”email”ᐳ"]:::plan
    PgSelect265[["PgSelect[265∈0]<br />ᐸpostᐳ"]]:::plan
    __Item269>"__Item[269∈10]<br />ᐸ265ᐳ"]:::itemplan
    PgSelectSingle270["PgSelectSingle[270∈10]<br />ᐸpostᐳ"]:::plan
    PgClassExpression271["PgClassExpression[271∈10]<br />ᐸ__post__.”headline”ᐳ"]:::plan
    PgClassExpression272["PgClassExpression[272∈10]<br />ᐸ__post__.”author_id”ᐳ"]:::plan

    %% plan dependencies
    __Value3 --> Access25
    __Value3 --> Access26
    Access25 & Access26 --> Object27
    Object27 --> PgSelect24
    PgSelect24 ==> __Item28
    __Item28 --> PgSelectSingle29
    PgSelectSingle29 --> PgClassExpression30
    PgSelectSingle29 --> PgClassExpression31
    PgSelectSingle29 --> PgClassExpression32
    Object27 --> PgSelect50
    PgSelect50 ==> __Item54
    __Item54 --> PgSelectSingle55
    PgSelectSingle55 --> PgClassExpression56
    PgSelectSingle55 --> PgClassExpression57
    PgSelectSingle55 --> PgClassExpression58
    Object27 --> PgSelect77
    PgSelect77 ==> __Item81
    __Item81 --> PgSelectSingle82
    PgSelectSingle82 --> PgClassExpression83
    PgSelectSingle82 --> PgClassExpression84
    PgSelectSingle82 --> PgClassExpression85
    Object27 --> PgSelect104
    PgSelect104 ==> __Item108
    __Item108 --> PgSelectSingle109
    PgSelectSingle109 --> PgClassExpression110
    PgSelectSingle109 --> PgClassExpression111
    PgSelectSingle109 --> PgClassExpression112
    Object27 & __InputStaticLeaf119 --> PgSelect123
    PgSelect123 ==> __Item127
    __Item127 --> PgSelectSingle128
    PgSelectSingle128 --> PgClassExpression129
    PgSelectSingle128 --> PgClassExpression130
    Object27 & __InputStaticLeaf137 --> PgSelect141
    PgSelect141 ==> __Item145
    __Item145 --> PgSelectSingle146
    PgSelectSingle146 --> PgClassExpression147
    PgSelectSingle146 --> PgClassExpression148
    Object27 --> PgSelect166
    PgSelect166 ==> __Item170
    __Item170 --> PgSelectSingle171
    PgSelectSingle171 --> PgClassExpression172
    PgSelectSingle171 --> PgClassExpression173
    PgSelectSingle171 --> PgClassExpression174
    Object27 --> PgSelect192
    PgSelect192 ==> __Item196
    __Item196 --> PgSelectSingle197
    PgSelectSingle197 --> PgClassExpression198
    PgSelectSingle197 --> PgClassExpression199
    PgSelectSingle197 --> PgClassExpression200
    Object27 --> PgSelect244
    PgSelect244 ==> __Item248
    __Item248 --> PgSelectSingle249
    PgSelectSingle249 --> PgClassExpression250
    PgSelectSingle249 --> PgClassExpression251
    PgSelectSingle249 --> PgClassExpression252
    Object27 --> PgSelect265
    PgSelect265 ==> __Item269
    __Item269 --> PgSelectSingle270
    PgSelectSingle270 --> PgClassExpression271
    PgSelectSingle270 --> PgClassExpression272

    %% plan-to-path relationships
    P0["~"]
    __Value0 -.-> P0
    P24["ᐳa<br />ᐳi"]
    PgSelect24 -.-> P24
    P29["ᐳa[]<br />ᐳi[]"]
    PgSelectSingle29 -.-> P29
    P30["ᐳa[]ᐳid<br />ᐳi[]ᐳid"]
    PgClassExpression30 -.-> P30
    P31["ᐳa[]ᐳname<br />ᐳi[]ᐳname"]
    PgClassExpression31 -.-> P31
    P32["ᐳa[]ᐳemail<br />ᐳi[]ᐳemail"]
    PgClassExpression32 -.-> P32
    P50["ᐳb"]
    PgSelect50 -.-> P50
    P55["ᐳb[]"]
    PgSelectSingle55 -.-> P55
    P56["ᐳb[]ᐳid"]
    PgClassExpression56 -.-> P56
    P57["ᐳb[]ᐳname"]
    PgClassExpression57 -.-> P57
    P58["ᐳb[]ᐳemail"]
    PgClassExpression58 -.-> P58
    P77["ᐳc"]
    PgSelect77 -.-> P77
    P82["ᐳc[]"]
    PgSelectSingle82 -.-> P82
    P83["ᐳc[]ᐳid"]
    PgClassExpression83 -.-> P83
    P84["ᐳc[]ᐳname"]
    PgClassExpression84 -.-> P84
    P85["ᐳc[]ᐳemail"]
    PgClassExpression85 -.-> P85
    P104["ᐳd"]
    PgSelect104 -.-> P104
    P109["ᐳd[]"]
    PgSelectSingle109 -.-> P109
    P110["ᐳd[]ᐳid"]
    PgClassExpression110 -.-> P110
    P111["ᐳd[]ᐳname"]
    PgClassExpression111 -.-> P111
    P112["ᐳd[]ᐳemail"]
    PgClassExpression112 -.-> P112
    P123["ᐳe"]
    PgSelect123 -.-> P123
    P128["ᐳe[]"]
    PgSelectSingle128 -.-> P128
    P129["ᐳe[]ᐳheadline"]
    PgClassExpression129 -.-> P129
    P130["ᐳe[]ᐳauthorId"]
    PgClassExpression130 -.-> P130
    P141["ᐳf"]
    PgSelect141 -.-> P141
    P146["ᐳf[]"]
    PgSelectSingle146 -.-> P146
    P147["ᐳf[]ᐳheadline"]
    PgClassExpression147 -.-> P147
    P148["ᐳf[]ᐳauthorId"]
    PgClassExpression148 -.-> P148
    P166["ᐳg"]
    PgSelect166 -.-> P166
    P171["ᐳg[]"]
    PgSelectSingle171 -.-> P171
    P172["ᐳg[]ᐳid"]
    PgClassExpression172 -.-> P172
    P173["ᐳg[]ᐳname"]
    PgClassExpression173 -.-> P173
    P174["ᐳg[]ᐳemail"]
    PgClassExpression174 -.-> P174
    P192["ᐳh"]
    PgSelect192 -.-> P192
    P197["ᐳh[]"]
    PgSelectSingle197 -.-> P197
    P198["ᐳh[]ᐳid"]
    PgClassExpression198 -.-> P198
    P199["ᐳh[]ᐳname"]
    PgClassExpression199 -.-> P199
    P200["ᐳh[]ᐳemail"]
    PgClassExpression200 -.-> P200
    P244["ᐳj"]
    PgSelect244 -.-> P244
    P249["ᐳj[]"]
    PgSelectSingle249 -.-> P249
    P250["ᐳj[]ᐳid"]
    PgClassExpression250 -.-> P250
    P251["ᐳj[]ᐳname"]
    PgClassExpression251 -.-> P251
    P252["ᐳj[]ᐳemail"]
    PgClassExpression252 -.-> P252
    P265["ᐳk"]
    PgSelect265 -.-> P265
    P270["ᐳk[]"]
    PgSelectSingle270 -.-> P270
    P271["ᐳk[]ᐳheadline"]
    PgClassExpression271 -.-> P271
    P272["ᐳk[]ᐳauthorId"]
    PgClassExpression272 -.-> P272

    subgraph "Buckets for queries/v4/simple-collections"
    Bucket0("Bucket 0 (root)<br />~<br />⠀ROOT ᐸ-O- 0<br />⠀⠀a ᐸ-A- 24<br />⠀⠀i ᐸ-A- 24<br />⠀⠀b ᐸ-A- 50<br />⠀⠀c ᐸ-A- 77<br />⠀⠀d ᐸ-A- 104<br />⠀⠀e ᐸ-A- 123<br />⠀⠀f ᐸ-A- 141<br />⠀⠀g ᐸ-A- 166<br />⠀⠀h ᐸ-A- 192<br />⠀⠀j ᐸ-A- 244<br />⠀⠀k ᐸ-A- 265"):::bucket
    classDef bucket0 stroke:#696969
    class Bucket0,__Value0,__Value3,PgSelect24,Access25,Access26,Object27,PgSelect50,PgSelect77,PgSelect104,__InputStaticLeaf119,PgSelect123,__InputStaticLeaf137,PgSelect141,PgSelect166,PgSelect192,PgSelect244,PgSelect265 bucket0
    Bucket1("Bucket 1 (item28)<br />Deps: 24<br />~ᐳQuery.a[]<br />~ᐳQuery.i[]<br />⠀ROOT ᐸ-O- 29<br />⠀⠀id ᐸ-L- 30<br />⠀⠀name ᐸ-L- 31<br />⠀⠀email ᐸ-L- 32"):::bucket
    classDef bucket1 stroke:#00bfff
    class Bucket1,__Item28,PgSelectSingle29,PgClassExpression30,PgClassExpression31,PgClassExpression32 bucket1
    Bucket2("Bucket 2 (item54)<br />Deps: 50<br />~ᐳQuery.b[]<br />⠀ROOT ᐸ-O- 55<br />⠀⠀id ᐸ-L- 56<br />⠀⠀name ᐸ-L- 57<br />⠀⠀email ᐸ-L- 58"):::bucket
    classDef bucket2 stroke:#7f007f
    class Bucket2,__Item54,PgSelectSingle55,PgClassExpression56,PgClassExpression57,PgClassExpression58 bucket2
    Bucket3("Bucket 3 (item81)<br />Deps: 77<br />~ᐳQuery.c[]<br />⠀ROOT ᐸ-O- 82<br />⠀⠀id ᐸ-L- 83<br />⠀⠀name ᐸ-L- 84<br />⠀⠀email ᐸ-L- 85"):::bucket
    classDef bucket3 stroke:#ffa500
    class Bucket3,__Item81,PgSelectSingle82,PgClassExpression83,PgClassExpression84,PgClassExpression85 bucket3
    Bucket4("Bucket 4 (item108)<br />Deps: 104<br />~ᐳQuery.d[]<br />⠀ROOT ᐸ-O- 109<br />⠀⠀id ᐸ-L- 110<br />⠀⠀name ᐸ-L- 111<br />⠀⠀email ᐸ-L- 112"):::bucket
    classDef bucket4 stroke:#0000ff
    class Bucket4,__Item108,PgSelectSingle109,PgClassExpression110,PgClassExpression111,PgClassExpression112 bucket4
    Bucket5("Bucket 5 (item127)<br />Deps: 123<br />~ᐳQuery.e[]<br />⠀ROOT ᐸ-O- 128<br />⠀⠀headline ᐸ-L- 129<br />⠀⠀authorId ᐸ-L- 130"):::bucket
    classDef bucket5 stroke:#7fff00
    class Bucket5,__Item127,PgSelectSingle128,PgClassExpression129,PgClassExpression130 bucket5
    Bucket6("Bucket 6 (item145)<br />Deps: 141<br />~ᐳQuery.f[]<br />⠀ROOT ᐸ-O- 146<br />⠀⠀headline ᐸ-L- 147<br />⠀⠀authorId ᐸ-L- 148"):::bucket
    classDef bucket6 stroke:#ff1493
    class Bucket6,__Item145,PgSelectSingle146,PgClassExpression147,PgClassExpression148 bucket6
    Bucket7("Bucket 7 (item170)<br />Deps: 166<br />~ᐳQuery.g[]<br />⠀ROOT ᐸ-O- 171<br />⠀⠀id ᐸ-L- 172<br />⠀⠀name ᐸ-L- 173<br />⠀⠀email ᐸ-L- 174"):::bucket
    classDef bucket7 stroke:#808000
    class Bucket7,__Item170,PgSelectSingle171,PgClassExpression172,PgClassExpression173,PgClassExpression174 bucket7
    Bucket8("Bucket 8 (item196)<br />Deps: 192<br />~ᐳQuery.h[]<br />⠀ROOT ᐸ-O- 197<br />⠀⠀id ᐸ-L- 198<br />⠀⠀name ᐸ-L- 199<br />⠀⠀email ᐸ-L- 200"):::bucket
    classDef bucket8 stroke:#dda0dd
    class Bucket8,__Item196,PgSelectSingle197,PgClassExpression198,PgClassExpression199,PgClassExpression200 bucket8
    Bucket9("Bucket 9 (item248)<br />Deps: 244<br />~ᐳQuery.j[]<br />⠀ROOT ᐸ-O- 249<br />⠀⠀id ᐸ-L- 250<br />⠀⠀name ᐸ-L- 251<br />⠀⠀email ᐸ-L- 252"):::bucket
    classDef bucket9 stroke:#ff0000
    class Bucket9,__Item248,PgSelectSingle249,PgClassExpression250,PgClassExpression251,PgClassExpression252 bucket9
    Bucket10("Bucket 10 (item269)<br />Deps: 265<br />~ᐳQuery.k[]<br />⠀ROOT ᐸ-O- 270<br />⠀⠀headline ᐸ-L- 271<br />⠀⠀authorId ᐸ-L- 272"):::bucket
    classDef bucket10 stroke:#ffff00
    class Bucket10,__Item269,PgSelectSingle270,PgClassExpression271,PgClassExpression272 bucket10
    Bucket0 --> Bucket1 & Bucket2 & Bucket3 & Bucket4 & Bucket5 & Bucket6 & Bucket7 & Bucket8 & Bucket9 & Bucket10
    end
